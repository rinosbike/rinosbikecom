{% doc %}
  @prompt
    Sizing chart
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-sizing-chart-{{ ai_gen_id }} {
    padding: {{ block.settings.padding_top }}px {{ block.settings.padding_horizontal }}px {{ block.settings.padding_bottom }}px;
    background-color: {{ block.settings.background_color }};
    border-radius: {{ block.settings.border_radius }}px;
    max-width: 100%;
    overflow: hidden;
  }

  .ai-sizing-chart-header-{{ ai_gen_id }} {
    text-align: {{ block.settings.text_alignment }};
    margin-bottom: {{ block.settings.spacing_between_elements }}px;
  }

  .ai-sizing-chart-title-{{ ai_gen_id }} {
    color: {{ block.settings.title_color }};
    font-size: {{ block.settings.title_size }}px;
    font-weight: 600;
    margin: 0 0 8px;
    line-height: 1.2;
  }

  .ai-sizing-chart-description-{{ ai_gen_id }} {
    color: {{ block.settings.text_color }};
    font-size: {{ block.settings.description_size }}px;
    margin: 0;
    line-height: 1.4;
  }

  .ai-sizing-chart-table-wrapper-{{ ai_gen_id }} {
    overflow-x: auto;
    margin-bottom: {{ block.settings.spacing_between_elements }}px;
    border-radius: {{ block.settings.table_border_radius }}px;
    border: {{ block.settings.table_border_width }}px solid {{ block.settings.table_border_color }};
  }

  .ai-sizing-chart-table-{{ ai_gen_id }} {
    width: 100%;
    border-collapse: collapse;
    font-size: {{ block.settings.table_text_size }}px;
    background-color: {{ block.settings.table_background_color }};
  }

  .ai-sizing-chart-table-{{ ai_gen_id }} th {
    background-color: {{ block.settings.header_background_color }};
    color: {{ block.settings.header_text_color }};
    padding: {{ block.settings.cell_padding }}px;
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid {{ block.settings.table_border_color }};
  }

  .ai-sizing-chart-table-{{ ai_gen_id }} td {
    padding: {{ block.settings.cell_padding }}px;
    color: {{ block.settings.table_text_color }};
    border-bottom: 1px solid {{ block.settings.table_border_color }};
  }

  .ai-sizing-chart-table-{{ ai_gen_id }} tr:nth-child(even) td {
    background-color: {{ block.settings.row_alternate_color }};
  }

  .ai-sizing-chart-table-{{ ai_gen_id }} tr:hover td {
    background-color: {{ block.settings.row_hover_color }};
  }

  .ai-sizing-chart-notes-{{ ai_gen_id }} {
    margin-top: {{ block.settings.spacing_between_elements }}px;
    padding: {{ block.settings.notes_padding }}px;
    background-color: {{ block.settings.notes_background_color }};
    border-radius: {{ block.settings.notes_border_radius }}px;
    border-left: 4px solid {{ block.settings.notes_accent_color }};
  }

  .ai-sizing-chart-notes-{{ ai_gen_id }} h4 {
    color: {{ block.settings.notes_title_color }};
    font-size: {{ block.settings.notes_title_size }}px;
    margin: 0 0 8px;
    font-weight: 600;
  }

  .ai-sizing-chart-notes-{{ ai_gen_id }} p {
    color: {{ block.settings.notes_text_color }};
    font-size: {{ block.settings.notes_text_size }}px;
    margin: 0;
    line-height: 1.4;
  }

  .ai-sizing-chart-empty-state-{{ ai_gen_id }} {
    text-align: center;
    padding: 40px 20px;
    color: #666;
    font-style: italic;
  }

  @media screen and (max-width: 749px) {
    .ai-sizing-chart-{{ ai_gen_id }} {
      padding: {{ block.settings.padding_top | times: 0.7 }}px {{ block.settings.padding_horizontal | times: 0.7 }}px {{ block.settings.padding_bottom | times: 0.7 }}px;
    }

    .ai-sizing-chart-title-{{ ai_gen_id }} {
      font-size: {{ block.settings.title_size | times: 0.9 }}px;
    }

    .ai-sizing-chart-table-{{ ai_gen_id }} {
      font-size: {{ block.settings.table_text_size | times: 0.9 }}px;
    }

    .ai-sizing-chart-table-{{ ai_gen_id }} th,
    .ai-sizing-chart-table-{{ ai_gen_id }} td {
      padding: {{ block.settings.cell_padding | times: 0.8 }}px;
    }
  }
{% endstyle %}

<div class="ai-sizing-chart-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  {% if block.settings.title != blank or block.settings.description != blank %}
    <div class="ai-sizing-chart-header-{{ ai_gen_id }}">
      {% if block.settings.title != blank %}
        <h3 class="ai-sizing-chart-title-{{ ai_gen_id }}">{{ block.settings.title }}</h3>
      {% endif %}
      {% if block.settings.description != blank %}
        <div class="ai-sizing-chart-description-{{ ai_gen_id }}">{{ block.settings.description }}</div>
      {% endif %}
    </div>
  {% endif %}

  {% assign has_data = false %}
  {% for i in (1..10) %}
    {% assign size_key = 'size_' | append: i %}
    {% assign measurement_1_key = 'measurement_1_' | append: i %}
    
    {% if block.settings[size_key] != blank and block.settings[measurement_1_key] != blank %}
      {% assign has_data = true %}
      {% break %}
    {% endif %}
  {% endfor %}

  {% if has_data %}
    <div class="ai-sizing-chart-table-wrapper-{{ ai_gen_id }}">
      <table class="ai-sizing-chart-table-{{ ai_gen_id }}">
        <thead>
          <tr>
            <th>{{ block.settings.size_column_title }}</th>
            {% if block.settings.measurement_1_title != blank %}
              <th>{{ block.settings.measurement_1_title }}</th>
            {% endif %}
            {% if block.settings.measurement_2_title != blank %}
              <th>{{ block.settings.measurement_2_title }}</th>
            {% endif %}
            {% if block.settings.measurement_3_title != blank %}
              <th>{{ block.settings.measurement_3_title }}</th>
            {% endif %}
            {% if block.settings.measurement_4_title != blank %}
              <th>{{ block.settings.measurement_4_title }}</th>
            {% endif %}
          </tr>
        </thead>
        <tbody>
          {% for i in (1..10) %}
            {% assign size_key = 'size_' | append: i %}
            {% assign measurement_1_key = 'measurement_1_' | append: i %}
            {% assign measurement_2_key = 'measurement_2_' | append: i %}
            {% assign measurement_3_key = 'measurement_3_' | append: i %}
            {% assign measurement_4_key = 'measurement_4_' | append: i %}
            
            {% if block.settings[size_key] != blank and block.settings[measurement_1_key] != blank %}
              <tr>
                <td>{{ block.settings[size_key] }}</td>
                {% if block.settings.measurement_1_title != blank %}
                  <td>{{ block.settings[measurement_1_key] }}</td>
                {% endif %}
                {% if block.settings.measurement_2_title != blank %}
                  <td>{{ block.settings[measurement_2_key] }}</td>
                {% endif %}
                {% if block.settings.measurement_3_title != blank %}
                  <td>{{ block.settings[measurement_3_key] }}</td>
                {% endif %}
                {% if block.settings.measurement_4_title != blank %}
                  <td>{{ block.settings[measurement_4_key] }}</td>
                {% endif %}
              </tr>
            {% endif %}
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="ai-sizing-chart-empty-state-{{ ai_gen_id }}">
      Next, add your sizing data in the block settings
    </div>
  {% endif %}

  {% if block.settings.notes != blank %}
    <div class="ai-sizing-chart-notes-{{ ai_gen_id }}">
      <h4>{{ block.settings.notes_title }}</h4>
      <div>{{ block.settings.notes }}</div>
    </div>
  {% endif %}
</div>

{% schema %}
{
  "name": "Sizing chart",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Size Guide"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>Find your perfect fit with our detailed sizing chart.</p>"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "header",
      "content": "Table headers"
    },
    {
      "type": "text",
      "id": "size_column_title",
      "label": "Size column title",
      "default": "Size"
    },
    {
      "type": "text",
      "id": "measurement_1_title",
      "label": "Measurement 1 title",
      "default": "Chest (cm)"
    },
    {
      "type": "text",
      "id": "measurement_2_title",
      "label": "Measurement 2 title",
      "default": "Waist (cm)"
    },
    {
      "type": "text",
      "id": "measurement_3_title",
      "label": "Measurement 3 title"
    },
    {
      "type": "text",
      "id": "measurement_4_title",
      "label": "Measurement 4 title"
    },
    {
      "type": "header",
      "content": "Size 1"
    },
    {
      "type": "text",
      "id": "size_1",
      "label": "Size",
      "default": "XS"
    },
    {
      "type": "text",
      "id": "measurement_1_1",
      "label": "Measurement 1",
      "default": "86-89"
    },
    {
      "type": "text",
      "id": "measurement_2_1",
      "label": "Measurement 2",
      "default": "66-69"
    },
    {
      "type": "text",
      "id": "measurement_3_1",
      "label": "Measurement 3"
    },
    {
      "type": "text",
      "id": "measurement_4_1",
      "label": "Measurement 4"
    },
    {
      "type": "header",
      "content": "Size 2"
    },
    {
      "type": "text",
      "id": "size_2",
      "label": "Size",
      "default": "S"
    },
    {
      "type": "text",
      "id": "measurement_1_2",
      "label": "Measurement 1",
      "default": "90-93"
    },
    {
      "type": "text",
      "id": "measurement_2_2",
      "label": "Measurement 2",
      "default": "70-73"
    },
    {
      "type": "text",
      "id": "measurement_3_2",
      "label": "Measurement 3"
    },
    {
      "type": "text",
      "id": "measurement_4_2",
      "label": "Measurement 4"
    },
    {
      "type": "header",
      "content": "Size 3"
    },
    {
      "type": "text",
      "id": "size_3",
      "label": "Size",
      "default": "M"
    },
    {
      "type": "text",
      "id": "measurement_1_3",
      "label": "Measurement 1",
      "default": "94-97"
    },
    {
      "type": "text",
      "id": "measurement_2_3",
      "label": "Measurement 2",
      "default": "74-77"
    },
    {
      "type": "text",
      "id": "measurement_3_3",
      "label": "Measurement 3"
    },
    {
      "type": "text",
      "id": "measurement_4_3",
      "label": "Measurement 4"
    },
    {
      "type": "header",
      "content": "Size 4"
    },
    {
      "type": "text",
      "id": "size_4",
      "label": "Size",
      "default": "L"
    },
    {
      "type": "text",
      "id": "measurement_1_4",
      "label": "Measurement 1",
      "default": "98-101"
    },
    {
      "type": "text",
      "id": "measurement_2_4",
      "label": "Measurement 2",
      "default": "78-81"
    },
    {
      "type": "text",
      "id": "measurement_3_4",
      "label": "Measurement 3"
    },
    {
      "type": "text",
      "id": "measurement_4_4",
      "label": "Measurement 4"
    },
    {
      "type": "header",
      "content": "Size 5"
    },
    {
      "type": "text",
      "id": "size_5",
      "label": "Size",
      "default": "XL"
    },
    {
      "type": "text",
      "id": "measurement_1_5",
      "label": "Measurement 1",
      "default": "102-105"
    },
    {
      "type": "text",
      "id": "measurement_2_5",
      "label": "Measurement 2",
      "default": "82-85"
    },
    {
      "type": "text",
      "id": "measurement_3_5",
      "label": "Measurement 3"
    },
    {
      "type": "text",
      "id": "measurement_4_5",
      "label": "Measurement 4"
    },
    {
      "type": "header",
      "content": "Size 6"
    },
    {
      "type": "text",
      "id": "size_6",
      "label": "Size"
    },
    {
      "type": "text",
      "id": "measurement_1_6",
      "label": "Measurement 1"
    },
    {
      "type": "text",
      "id": "measurement_2_6",
      "label": "Measurement 2"
    },
    {
      "type": "text",
      "id": "measurement_3_6",
      "label": "Measurement 3"
    },
    {
      "type": "text",
      "id": "measurement_4_6",
      "label": "Measurement 4"
    },
    {
      "type": "header",
      "content": "Size 7"
    },
    {
      "type": "text",
      "id": "size_7",
      "label": "Size"
    },
    {
      "type": "text",
      "id": "measurement_1_7",
      "label": "Measurement 1"
    },
    {
      "type": "text",
      "id": "measurement_2_7",
      "label": "Measurement 2"
    },
    {
      "type": "text",
      "id": "measurement_3_7",
      "label": "Measurement 3"
    },
    {
      "type": "text",
      "id": "measurement_4_7",
      "label": "Measurement 4"
    },
    {
      "type": "header",
      "content": "Size 8"
    },
    {
      "type": "text",
      "id": "size_8",
      "label": "Size"
    },
    {
      "type": "text",
      "id": "measurement_1_8",
      "label": "Measurement 1"
    },
    {
      "type": "text",
      "id": "measurement_2_8",
      "label": "Measurement 2"
    },
    {
      "type": "text",
      "id": "measurement_3_8",
      "label": "Measurement 3"
    },
    {
      "type": "text",
      "id": "measurement_4_8",
      "label": "Measurement 4"
    },
    {
      "type": "header",
      "content": "Size 9"
    },
    {
      "type": "text",
      "id": "size_9",
      "label": "Size"
    },
    {
      "type": "text",
      "id": "measurement_1_9",
      "label": "Measurement 1"
    },
    {
      "type": "text",
      "id": "measurement_2_9",
      "label": "Measurement 2"
    },
    {
      "type": "text",
      "id": "measurement_3_9",
      "label": "Measurement 3"
    },
    {
      "type": "text",
      "id": "measurement_4_9",
      "label": "Measurement 4"
    },
    {
      "type": "header",
      "content": "Size 10"
    },
    {
      "type": "text",
      "id": "size_10",
      "label": "Size"
    },
    {
      "type": "text",
      "id": "measurement_1_10",
      "label": "Measurement 1"
    },
    {
      "type": "text",
      "id": "measurement_2_10",
      "label": "Measurement 2"
    },
    {
      "type": "text",
      "id": "measurement_3_10",
      "label": "Measurement 3"
    },
    {
      "type": "text",
      "id": "measurement_4_10",
      "label": "Measurement 4"
    },
    {
      "type": "header",
      "content": "Notes"
    },
    {
      "type": "text",
      "id": "notes_title",
      "label": "Notes title",
      "default": "Sizing Notes"
    },
    {
      "type": "richtext",
      "id": "notes",
      "label": "Notes",
      "default": "<p>All measurements are in centimeters. For the best fit, measure yourself and compare to the chart above.</p>"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_horizontal",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Horizontal padding",
      "default": 20
    },
    {
      "type": "range",
      "id": "spacing_between_elements",
      "min": 8,
      "max": 40,
      "step": 4,
      "unit": "px",
      "label": "Spacing between elements",
      "default": 20
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 4
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#2a2a2a"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#2a2a2a"
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 16,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Title size",
      "default": 24
    },
    {
      "type": "range",
      "id": "description_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Description size",
      "default": 16
    },
    {
      "type": "header",
      "content": "Table style"
    },
    {
      "type": "color",
      "id": "table_background_color",
      "label": "Table background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "header_background_color",
      "label": "Header background",
      "default": "#f8f8f8"
    },
    {
      "type": "color",
      "id": "header_text_color",
      "label": "Header text color",
      "default": "#2a2a2a"
    },
    {
      "type": "color",
      "id": "table_text_color",
      "label": "Table text color",
      "default": "#2a2a2a"
    },
    {
      "type": "color",
      "id": "table_border_color",
      "label": "Border color",
      "default": "#e0e0e0"
    },
    {
      "type": "color",
      "id": "row_alternate_color",
      "label": "Alternate row color",
      "default": "#f9f9f9"
    },
    {
      "type": "color",
      "id": "row_hover_color",
      "label": "Row hover color",
      "default": "#f0f0f0"
    },
    {
      "type": "range",
      "id": "table_border_width",
      "min": 0,
      "max": 4,
      "step": 1,
      "unit": "px",
      "label": "Border width",
      "default": 1
    },
    {
      "type": "range",
      "id": "table_border_radius",
      "min": 0,
      "max": 12,
      "step": 2,
      "unit": "px",
      "label": "Table border radius",
      "default": 4
    },
    {
      "type": "range",
      "id": "cell_padding",
      "min": 8,
      "max": 24,
      "step": 2,
      "unit": "px",
      "label": "Cell padding",
      "default": 12
    },
    {
      "type": "range",
      "id": "table_text_size",
      "min": 12,
      "max": 18,
      "step": 1,
      "unit": "px",
      "label": "Table text size",
      "default": 14
    },
    {
      "type": "header",
      "content": "Notes style"
    },
    {
      "type": "color",
      "id": "notes_background_color",
      "label": "Notes background",
      "default": "#f8f9fa"
    },
    {
      "type": "color",
      "id": "notes_accent_color",
      "label": "Notes accent color",
      "default": "#0a0a0a"
    },
    {
      "type": "color",
      "id": "notes_title_color",
      "label": "Notes title color",
      "default": "#2a2a2a"
    },
    {
      "type": "color",
      "id": "notes_text_color",
      "label": "Notes text color",
      "default": "#2a2a2a"
    },
    {
      "type": "range",
      "id": "notes_padding",
      "min": 8,
      "max": 24,
      "step": 2,
      "unit": "px",
      "label": "Notes padding",
      "default": 16
    },
    {
      "type": "range",
      "id": "notes_border_radius",
      "min": 0,
      "max": 12,
      "step": 2,
      "unit": "px",
      "label": "Notes border radius",
      "default": 4
    },
    {
      "type": "range",
      "id": "notes_title_size",
      "min": 14,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Notes title size",
      "default": 16
    },
    {
      "type": "range",
      "id": "notes_text_size",
      "min": 12,
      "max": 18,
      "step": 1,
      "unit": "px",
      "label": "Notes text size",
      "default": 14
    }
  ],
  "presets": [
    {
      "name": "Sizing chart"
    }
  ]
}
{% endschema %}